<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Getting Started · Morrys Repositories</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# [React Relay Offline](https://github.com/morrys/react-relay-offline)"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Getting Started · Morrys Repositories"/><meta property="og:type" content="website"/><meta property="og:url" content="https://morrys.github.io/react-relay-offline/"/><meta property="og:description" content="# [React Relay Offline](https://github.com/morrys/react-relay-offline)"/><meta property="og:image" content="https://morrys.github.io/react-relay-offline/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://morrys.github.io/react-relay-offline/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/react-relay-offline/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-146953551-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/react-relay-offline/js/scrollSpy.js"></script><link rel="stylesheet" href="/react-relay-offline/css/main.css"/><script src="/react-relay-offline/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/react-relay-offline/"><img class="logo" src="/react-relay-offline/img/favicon.ico" alt="Morrys Repositories"/><h2 class="headerTitleWithLogo">Morrys Repositories</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive siteNavItemActive"><a href="/react-relay-offline/docs/react-relay-offline" target="_self">Docs</a></li><li class=""><a href="https://github.com/morrys/react-relay-offline" target="_self">GitHub</a></li><li class=""><a target="_self"></a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>React Relay Offline</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">React Relay Offline</h3><ul class=""><li class="navListItem navListItemActive"><a class="navItem" href="/react-relay-offline/docs/react-relay-offline">Getting Started</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Getting Started</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="react-relay-offline-https-githubcom-morrys-react-relay-offline"></a><a href="#react-relay-offline-https-githubcom-morrys-react-relay-offline" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://github.com/morrys/react-relay-offline">React Relay Offline</a></h1>
<p>React Relay Offline is a extension of <a href="https://facebook.github.io/relay/">Relay</a> for offline capabilities</p>
<h2><a class="anchor" aria-hidden="true" id="installation-react-web"></a><a href="#installation-react-web" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation React Web</h2>
<p>Install react-relay and react-relay-offline using yarn or npm:</p>
<pre><code class="hljs">yarn <span class="hljs-keyword">add</span><span class="bash"> react-relay react-relay-offline</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="installation-react-native"></a><a href="#installation-react-native" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation React Native</h2>
<p>Install react-relay and react-relay-offline using yarn or npm:</p>
<pre><code class="hljs"><span class="hljs-selector-tag">yarn</span> <span class="hljs-selector-tag">add</span> @<span class="hljs-keyword">react</span>-<span class="hljs-keyword">native</span>-<span class="hljs-keyword">community</span>/<span class="hljs-keyword">netinfo</span> react-relay react-relay-offline
</code></pre>
<p>You then need to link the native parts of the library for the platforms you are using. The easiest way to link the library is using the CLI tool by running this command from the root of your project:</p>
<p><code>react-native link @react-native-community/netinfo</code></p>
<h2><a class="anchor" aria-hidden="true" id="main-additional-features"></a><a href="#main-additional-features" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Main Additional Features</h2>
<ul>
<li><p>automatic persistence and rehydration of the store (AsyncStorage, localStorage, IndexedDB)</p></li>
<li><p>configuration of persistence</p>
<ul>
<li><p>custom storage</p></li>
<li><p>different key prefix (multi user)</p></li>
<li><p>serialization: JSON or none</p></li>
</ul></li>
<li><p>fetchPolicy network-only, store-and-network, store-or-network, store-only</p></li>
<li><p>management and utilities for network detection</p></li>
<li><p>automatic use of the polity <strong>store-only</strong> when the application is offline</p></li>
<li><p>optimization in store management and addition of <strong>TTL</strong> to queries in the store</p></li>
<li><p>offline mutation management</p>
<ul>
<li><p>backup of mutation changes</p></li>
<li><p>update and publication of the mutation changes in the store</p></li>
<li><p>persistence of mutation information performed</p></li>
<li><p>automatic execution of mutations persisted when the application returns online</p></li>
<li><p>configurability of the offline mutation execution network</p></li>
<li><p>onComplete callback of the mutation performed successfully</p></li>
<li><p>onDiscard callback of the failed mutation</p></li>
</ul></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="contributing"></a><a href="#contributing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributing</h2>
<ul>
<li><p><strong>Give a star</strong> to the repository and <strong>share it</strong>, you will <strong>help</strong> the <strong>project</strong> and the <strong>people</strong> who will find it useful</p></li>
<li><p><strong>Create issues</strong>, your <strong>questions</strong> are a <strong>valuable help</strong></p></li>
<li><p><strong>PRs are welcome</strong>, but it is always <strong>better to open the issue first</strong> so as to <strong>help</strong> me and other people <strong>evaluating it</strong></p></li>
<li><p><strong>Please sponsor me</strong></p></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="sponsors"></a><a href="#sponsors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sponsors</h3>
<p><a href="https://memorangapp.com" target="_blank"><img height=40px src="https://github.com/morrys/react-relay-offline/raw/master/docs/assets/memorang-logo.png" alt="Memorang"></p>
<h2><a class="anchor" aria-hidden="true" id="react-relay-offline-examples"></a><a href="#react-relay-offline-examples" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>react-relay-offline examples</h2>
<p>The <a href="https://github.com/morrys/offline-examples">offline-examples</a> repository contains example projects on how to use react-relay-offline:</p>
<ul>
<li><code>nextjs-ssr-preload</code>: using the render-as-you-fetch pattern with loadQuery in SSR contexts</li>
<li><code>nextjs</code>: using the QueryRenderer in SSR contexts</li>
<li><code>react-native/todo-updater</code>: using QueryRender in an RN application</li>
<li><code>todo-updater</code>: using the QueryRender</li>
<li><code>suspense/cra</code>: using useLazyLoadQuery in a CRA</li>
<li><code>suspense/nextjs-ssr-preload</code>: using the render-as-you-fetch pattern with loadLazyQuery in react concurrent + SSR contexts</li>
<li><code>suspense/nextjs-ssr</code>: using useLazyLoadQuery in SSR contexts</li>
</ul>
<p>To try it out!</p>
<h2><a class="anchor" aria-hidden="true" id="environment"></a><a href="#environment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environment</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { Network } <span class="hljs-keyword">from</span> <span class="hljs-string">"relay-runtime"</span>;
<span class="hljs-keyword">import</span> { RecordSource, Store, Environment } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;

<span class="hljs-keyword">const</span> network = Network.create(fetchQuery);
<span class="hljs-keyword">const</span> recordSource = <span class="hljs-keyword">new</span> RecordSource();
<span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Store(recordSource);
<span class="hljs-keyword">const</span> environment = <span class="hljs-keyword">new</span> Environment({ network, store });
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="environment-with-offline-options"></a><a href="#environment-with-offline-options" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environment with Offline Options</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { Network } <span class="hljs-keyword">from</span> <span class="hljs-string">"relay-runtime"</span>;
<span class="hljs-keyword">import</span> { RecordSource, Store, Environment } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;

<span class="hljs-keyword">const</span> network = Network.create(fetchQuery);

<span class="hljs-keyword">const</span> networkOffline = Network.create(fetchQueryOffline);
<span class="hljs-keyword">const</span> manualExecution = <span class="hljs-literal">false</span>;

<span class="hljs-keyword">const</span> recordSource = <span class="hljs-keyword">new</span> RecordSource();
<span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Store(recordSource);
<span class="hljs-keyword">const</span> environment = <span class="hljs-keyword">new</span> Environment({ network, store });
environment.setOfflineOptions({
  manualExecution, <span class="hljs-comment">//optional</span>
  network: networkOffline, <span class="hljs-comment">//optional</span>
  start: <span class="hljs-keyword">async</span> mutations =&gt; {
    <span class="hljs-comment">//optional</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"start offline"</span>, mutations);
    <span class="hljs-keyword">return</span> mutations;
  },
  finish: <span class="hljs-keyword">async</span> (mutations, error) =&gt; {
    <span class="hljs-comment">//optional</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"finish offline"</span>, error, mutations);
  },
  onExecute: <span class="hljs-keyword">async</span> mutation =&gt; {
    <span class="hljs-comment">//optional</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"onExecute offline"</span>, mutation);
    <span class="hljs-keyword">return</span> mutation;
  },
  onComplete: <span class="hljs-keyword">async</span> options =&gt; {
    <span class="hljs-comment">//optional</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"onComplete offline"</span>, options);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  onDiscard: <span class="hljs-keyword">async</span> options =&gt; {
    <span class="hljs-comment">//optional</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"onDiscard offline"</span>, options);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  onPublish: <span class="hljs-keyword">async</span> offlinePayload =&gt; {
    <span class="hljs-comment">//optional</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"offlinePayload"</span>, offlinePayload);
    <span class="hljs-keyword">return</span> offlinePayload;
  }
});
</code></pre>
<ul>
<li><p>manualExecution: if set to true, mutations in the queue are no longer performed automatically as soon as you go back online. invoke manually: <code>environment.getStoreOffline().execute();</code></p></li>
<li><p>network: it is possible to configure a different network for the execution of mutations in the queue; all the information of the mutation saved in the offline store are inserted into the &quot;metadata&quot; field of the CacheConfig so that they can be used during communication with the server.</p></li>
</ul>
<ul>
<li><p>start: function that is called once the request queue has been started.</p></li>
<li><p>finish: function that is called once the request queue has been processed.</p></li>
<li><p>onExecute: function that is called before the request is sent to the network.</p></li>
<li><p>onPublish: function that is called before saving the mutation in the store</p></li>
<li><p>onComplete: function that is called once the request has been successfully completed. Only if the function returns the value true, the request is deleted from the queue.</p></li>
<li><p>onDiscard: function that is called when the request returns an error. Only if the function returns the value true, the mutation is deleted from the queue</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="indexeddb"></a><a href="#indexeddb" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IndexedDB</h2>
<p>localStorage is used as the default react web persistence, while AsyncStorage is used for react-native.</p>
<p>To use persistence via IndexedDB:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { Network } <span class="hljs-keyword">from</span> <span class="hljs-string">"relay-runtime"</span>;
<span class="hljs-keyword">import</span> EnvironmentIDB <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline/lib/runtime/EnvironmentIDB"</span>;

<span class="hljs-keyword">const</span> network = Network.create(fetchQuery);
<span class="hljs-keyword">const</span> environment = EnvironmentIDB.create({ network });
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="environment-with-persistofflineoptions"></a><a href="#environment-with-persistofflineoptions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environment with PersistOfflineOptions</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { Network } <span class="hljs-keyword">from</span> <span class="hljs-string">"relay-runtime"</span>;
<span class="hljs-keyword">import</span> { RecordSource, Store, Environment } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;
<span class="hljs-keyword">import</span> { CacheOptions } <span class="hljs-keyword">from</span> <span class="hljs-string">"@wora/cache-persist"</span>;

<span class="hljs-keyword">const</span> network = Network.create(fetchQuery);

<span class="hljs-keyword">const</span> networkOffline = Network.create(fetchQueryOffline);

<span class="hljs-keyword">const</span> persistOfflineOptions: CacheOptions = {
  prefix: <span class="hljs-string">"app-user1"</span>
};
<span class="hljs-keyword">const</span> recordSource = <span class="hljs-keyword">new</span> RecordSource();
<span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Store(recordSource);
<span class="hljs-keyword">const</span> environment = <span class="hljs-keyword">new</span> Environment({ network, store }, persistOfflineOptions);
</code></pre>
<p><a href="https://morrys.github.io/wora/docs/cache-persist.html#cache-options">CacheOptions</a></p>
<h2><a class="anchor" aria-hidden="true" id="store-with-custom-options"></a><a href="#store-with-custom-options" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Store with custom options</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { Store } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;
<span class="hljs-keyword">import</span> { CacheOptions } <span class="hljs-keyword">from</span> <span class="hljs-string">"@wora/cache-persist"</span>;
<span class="hljs-keyword">import</span> { CacheOptionsStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"@wora/relay-store"</span>;

<span class="hljs-keyword">const</span> persistOptionsStore: CacheOptionsStore = { defaultTTL: <span class="hljs-number">10</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> }; <span class="hljs-comment">// default</span>
<span class="hljs-keyword">const</span> persistOptionsRecords: CacheOptions = {}; <span class="hljs-comment">// default</span>
<span class="hljs-keyword">const</span> recordSource = <span class="hljs-keyword">new</span> RecordSource(persistOptionsRecords);
<span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> Store(recordSource, persistOptionsStore);
<span class="hljs-keyword">const</span> environment = <span class="hljs-keyword">new</span> Environment({ network, store });
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="queryrenderer"></a><a href="#queryrenderer" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>QueryRenderer</h2>
<ul>
<li>Add &quot;cached&quot; property in render function</li>
<li>Add &quot;ttl&quot; property in order to change default ttl in store</li>
<li><code>fetchPolicy</code> determine whether it should use data cached in the Relay store and whether to send a network request. The options are:
<ul>
<li><code>store-or-network</code> (default): Reuse data cached in the store; if the whole query is cached, skip the network request</li>
<li><code>store-and-network</code>: Reuse data cached in the store; always send a network request.</li>
<li><code>network-only</code>: Don't reuse data cached in the store; always send a network request. (This is the default behavior of Relay's existing <code>QueryRenderer</code>.)</li>
<li><code>store-only</code>: Reuse data cached in the store; never send a network request.</li>
</ul></li>
</ul>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { QueryRenderer } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-relay-offline'</span>;

&lt;QueryRenderer
        environment={environment}
        query={query}
        variables={{}}
        fetchPolicy=<span class="hljs-string">'store-or-network'</span>
        ttl={<span class="hljs-number">100000</span>}
        render={<span class="hljs-function">(<span class="hljs-params">{ props, error, retry, cached }</span>) =&gt;</span> {
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="usequery"></a><a href="#usequery" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>useQuery</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { useQuery } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;
<span class="hljs-keyword">const</span> hooksProps = useQuery(query, variables, {
  networkCacheConfig: cacheConfig,
  fetchPolicy,
  ttl
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="uselazyloadquery"></a><a href="#uselazyloadquery" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>useLazyLoadQuery</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { useQuery } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;
<span class="hljs-keyword">const</span> hooksProps = useLazyLoadQuery(query, variables, {
  networkCacheConfig: cacheConfig,
  fetchPolicy,
  ttl
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="userestore-loading"></a><a href="#userestore-loading" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>useRestore &amp; loading</h2>
<p>the <strong>useRestore</strong> hook allows you to manage the hydratation of persistent data in memory and to initialize the environment.</p>
<p><strong>It must always be used before using environement in web applications without SSR &amp; react legacy &amp; react-native.</strong></p>
<p><strong>Otherwise, for SSR and react concurrent applications the restore is natively managed by QueryRenderer &amp; useQueryLazyLoad &amp; useQuery.</strong></p>
<pre><code class="hljs"><span class="hljs-keyword">const</span> isRehydrated = useRestore(environment);
   <span class="hljs-keyword">if</span> (!isRehydrated) {
     <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Loading</span> /&gt;</span>;
   }
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="fetchquery"></a><a href="#fetchquery" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>fetchQuery</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { fetchQuery } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="mutation"></a><a href="#mutation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mutation</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { commitMutation, graphql } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="detect-network"></a><a href="#detect-network" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Detect Network</h2>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { useIsConnected } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;
<span class="hljs-keyword">import</span> { useNetInfo } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;
<span class="hljs-keyword">import</span> { NetInfo } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-relay-offline"</span>;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="supports-hooks-from-relay-hooks"></a><a href="#supports-hooks-from-relay-hooks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supports Hooks from relay-hooks</h2>
<p>Now you can use hooks (useFragment, usePagination, useRefetch) from <a href="https://github.com/relay-tools/relay-hooks">relay-hooks</a></p>
<h2><a class="anchor" aria-hidden="true" id="render-as-you-fetch-usepreloadedquery"></a><a href="#render-as-you-fetch-usepreloadedquery" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>render-as-you-fetch &amp; usePreloadedQuery</h2>
<h3><a class="anchor" aria-hidden="true" id="loadquery"></a><a href="#loadquery" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>loadQuery</h3>
<ul>
<li>input parameters</li>
</ul>
<p>same as useQuery + environment</p>
<ul>
<li>output parameters
<ul>
<li><code>next: &lt;TOperationType extends OperationType&gt;( environment: Environment, gqlQuery: GraphQLTaggedNode, variables?: TOperationType['variables'], options?: QueryOptions, ) =&gt; Promise&lt;void&gt;</code>:  fetches data. A promise returns to allow the await in case of SSR</li>
<li><code>dispose: () =&gt; void</code>: cancel the subscription and dispose of the fetch</li>
<li><code>subscribe: (callback: (value: any) =&gt; any) =&gt; () =&gt; void</code>:  used by the usePreloadedQuery</li>
<li><code>getValue &lt;TOperationType&gt;(environment?: Environment,) =&gt; OfflineRenderProps&lt;TOperationType&gt; | Promise&lt;any&gt;</code>:  used by the usePreloadedQuery</li>
</ul></li>
</ul>
<pre><code class="hljs css language-ts">import {graphql, loadQuery} from 'react-relay-offline';
import {environment} from ''./environment';

const query = graphql`
  query AppQuery($id: ID!) {
    user(id: $id) {
      name
    }
  }
`;

const prefetch = loadQuery();
prefetch.next(
  environment,
  query,
  {id: '4'},
  {fetchPolicy: 'store-or-network'},
);
// pass prefetch to usePreloadedQuery()
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="loadlazyquery"></a><a href="#loadlazyquery" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>loadLazyQuery</h3>
<p><strong>is the same as loadQuery but must be used with suspense</strong></p>
<h3><a class="anchor" aria-hidden="true" id="render-as-you-fetch-in-ssr"></a><a href="#render-as-you-fetch-in-ssr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>render-as-you-fetch in SSR</h3>
<p>In SSR contexts, <strong>not using the useRestore hook</strong> it is necessary to manually invoke the hydrate but without using the await.</p>
<p>This will allow the usePreloadedQuery hook to correctly retrieve the data from the store and once the hydration is done it will be react-relay-offline</p>
<p>to notify any updated data in the store.</p>
<pre><code class="hljs css language-ts">  <span class="hljs-keyword">if</span> (!environment.isRehydrated() &amp;&amp; ssr) {
      environment.hydrate().then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {}).catch(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {});
  }
  prefetch.next(environment, QUERY_APP, variables, {
         fetchPolicy: NETWORK_ONLY,
  });
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="requirement"></a><a href="#requirement" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requirement</h2>
<ul>
<li>Version &gt;=8.0.0 of the react-relay library</li>
<li>When a new node is created by mutation the id must be generated in the browser to use it in the optimistic response</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="license"></a><a href="#license" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>License</h2>
<p>React Relay Offline is <a href="./LICENSE">MIT licensed</a>.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2020-10-9 by morrys</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#installation-react-web">Installation React Web</a></li><li><a href="#installation-react-native">Installation React Native</a></li><li><a href="#main-additional-features">Main Additional Features</a></li><li><a href="#contributing">Contributing</a><ul class="toc-headings"><li><a href="#sponsors">Sponsors</a></li></ul></li><li><a href="#react-relay-offline-examples">react-relay-offline examples</a></li><li><a href="#environment">Environment</a></li><li><a href="#environment-with-offline-options">Environment with Offline Options</a></li><li><a href="#indexeddb">IndexedDB</a></li><li><a href="#environment-with-persistofflineoptions">Environment with PersistOfflineOptions</a></li><li><a href="#store-with-custom-options">Store with custom options</a></li><li><a href="#queryrenderer">QueryRenderer</a></li><li><a href="#usequery">useQuery</a></li><li><a href="#uselazyloadquery">useLazyLoadQuery</a></li><li><a href="#userestore-loading">useRestore &amp; loading</a></li><li><a href="#fetchquery">fetchQuery</a></li><li><a href="#mutation">Mutation</a></li><li><a href="#detect-network">Detect Network</a></li><li><a href="#supports-hooks-from-relay-hooks">Supports Hooks from relay-hooks</a></li><li><a href="#render-as-you-fetch-usepreloadedquery">render-as-you-fetch &amp; usePreloadedQuery</a><ul class="toc-headings"><li><a href="#loadquery">loadQuery</a></li><li><a href="#loadlazyquery">loadLazyQuery</a></li><li><a href="#render-as-you-fetch-in-ssr">render-as-you-fetch in SSR</a></li></ul></li><li><a href="#requirement">Requirement</a></li><li><a href="#license">License</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/react-relay-offline/" class="nav-home"><img src="/react-relay-offline/img/favicon.ico" alt="Morrys Repositories" width="66" height="58"/></a><div><h5>Docs</h5><a href="/react-relay-offline/docs/en/relay-hooks.html">about relay-hooks</a></div><div><h5>Community</h5><a href="/react-relay-offline/en/users.html">User Showcase</a></div><div><h5>More</h5><a href="https://github.com/morrys/wora">GitHub</a><a class="github-button" href="https://github.com/morrys/react-relay-offline" data-icon="octicon-star" data-count-href="https://github.com/morrys/wora/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><div class="social"><a href="https://twitter.com/m0rrys" class="twitter-follow-button">Follow @m0rrys</a></div></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/react-relay-offline/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2020 Lorenzo Di Giacomo</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '87a72e28932891cac536490e275e834e',
                indexName: 'morrys',
                inputSelector: '#search_input_react'
              });
            </script></body></html>